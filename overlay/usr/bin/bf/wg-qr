#!/command/with-contenv bash

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Check variables.
#======================================================================================================================

[[ -z "${1-}" ]] && bf-error "You must pass a peer." "wg-qr"
PEER="${1}"


#======================================================================================================================
# Show this user's config as a QR code.
#======================================================================================================================

CONFIG=${WIREGUARD_PEERS_D}/${PEER}/config
[[ -f ${CONFIG} ]] || bf-error "Configuration file for ${PEER} does not exist." "wg-qr"

qrencode -t "${WIREGUARD_QR_ENCODING}" < ${CONFIG}
