#!/usr/bin/nu

use bf
use bf-wireguard peers
bf env load -x

# Show QR code of the configuration for peer $name
def main [
    name: string    # Peer name
] {
    # get configuration
    let config = peers get_conf $name

    # convert to QR code and show
    { ^qrencode -t (bf env WIREGUARD_QR_ENCODING) $config } | bf handle
}
