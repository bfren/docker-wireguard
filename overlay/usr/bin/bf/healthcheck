#!/usr/bin/nu

use bf
bf env load -x

# Check WireGuard is running
def main [] {
    # show WireGuard status
    bf write debug $"Checking WireGuard is listening on the correct port."
    let listening = $"listening port: 51820"
    { ^wg show | grep $listening } | bf handle -c | exit $in
}
