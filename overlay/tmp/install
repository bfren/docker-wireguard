#!/bin/sh

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Get WireGuard version.
#======================================================================================================================

cd /tmp

VERSION=$(cat WIREGUARD_BUILD)
bf-echo "WireGuard version ${VERSION}."


#======================================================================================================================
# Install WireGuard and dependencies.
#======================================================================================================================

bf-echo "Installing WireGuard v${VERSION}..."
apk add --no-cache \
    bc \
    coredns \
    gnupg \
    grep \
    iproute2 \
    iptables \
    ip6tables \
    iputils \
    libcap-utils \
    libqrencode \
    net-tools \
    openresolv \
    perl \
    wireguard-tools=${VERSION}
bf-done


#======================================================================================================================
# Cleanup.
#======================================================================================================================

bf-done
